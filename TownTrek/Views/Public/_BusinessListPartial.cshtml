@model TownTrek.Models.ViewModels.TownBusinessListViewModel

@if (Model.Businesses.Any())
{
    <div class="business-grid">
        @foreach (var business in Model.Businesses)
        {
            @await Html.PartialAsync("_BusinessCard", business)
        }
    </div>

    <!-- Pagination -->
    @if (Model.TotalPages > 1)
    {
        <div class="pagination-wrapper">
            <nav class="pagination">
                @if (Model.HasPreviousPage)
                {
                    <a href="#" class="pagination-btn" data-page="@(Model.CurrentPage - 1)">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 23 23">
                            <polyline points="15,18 9,12 15,6"/>
                        </svg>
                        Previous
                    </a>
                }

                @for (int i = Math.Max(1, Model.CurrentPage - 2); i <= Math.Min(Model.TotalPages, Model.CurrentPage + 2); i++)
                {
                    <a href="#" class="pagination-btn @(i == Model.CurrentPage ? "active" : "")" data-page="@i">
                        @i
                    </a>
                }

                @if (Model.HasNextPage)
                {
                    <a href="#" class="pagination-btn" data-page="@(Model.CurrentPage + 1)">
                        Next
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 23 23">
                            <polyline points="9,18 15,12 9,6"/>
                        </svg>
                    </a>
                }
            </nav>
        </div>
    }
}
else
{
    <div class="no-results">
        <div class="no-results-icon">üîç</div>
        <h3>No businesses found</h3>
        <p>Try adjusting your search criteria or explore other categories.</p>
        <div class="no-results-actions">
            <button type="button" id="clearFiltersNoResults" class="btn btn-primary">Clear Filters</button>
            <a href="@Url.Action("Index", "Public")" class="btn btn-secondary">Back to Dashboard</a>
        </div>
    </div>
}
