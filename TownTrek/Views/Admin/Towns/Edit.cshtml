@using TownTrek.Models.ViewModels
@model AddTownViewModel
@{
    ViewData["Title"] = "Edit Town";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

@section Styles {
    <link rel="stylesheet" href="~/css/features/towns/towns.css" asp-append-version="true" />
}

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}

<!-- Page Header -->
<div class="page-header">
    <div class="page-header-content">
        <div>
            <h1 class="page-title">Edit Town</h1>
            <p class="page-description">Update the town information below.</p>
        </div>
        <div class="page-actions">
            <a href="@Url.Action("Index", "AdminTowns")" class="auth-btn auth-btn-secondary">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 23 23">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                Back to Towns
            </a>
        </div>
    </div>
</div>

<!-- Edit Town Form -->
<div class="admin-card">
    <div class="admin-card-header">
        <h3 class="admin-card-title">Update Town Information</h3>
        <p class="admin-card-description">Modify the details below to update the town listing</p>
    </div>
    
    <form asp-action="Edit" method="post" class="add-business-form" data-form-handler>
        @Html.AntiForgeryToken()
        @Html.HiddenFor(m => m.Id)
        
        <!-- Basic Information -->
        <div class="form-section">
            <div class="form-section-header">
                <h4 class="form-section-title">
                    <span class="step-number">1</span>
                    Basic Information
                </h4>
                <p class="form-section-description">Essential details about the town</p>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label asp-for="Name" class="form-label required">Town Name</label>
                    <input asp-for="Name" class="form-input" placeholder="Enter town name" />
                    <span asp-validation-for="Name" class="error-message"></span>
                    <span class="form-help">Official name of the town or city</span>
                </div>

                <div class="form-group">
                    <label asp-for="Province" class="form-label required">Province</label>
                    <select asp-for="Province" class="form-select">
                        <option value="">Select a province</option>
                        <option value="Eastern Cape">Eastern Cape</option>
                        <option value="Free State">Free State</option>
                        <option value="Gauteng">Gauteng</option>
                        <option value="KwaZulu-Natal">KwaZulu-Natal</option>
                        <option value="Limpopo">Limpopo</option>
                        <option value="Mpumalanga">Mpumalanga</option>
                        <option value="Northern Cape">Northern Cape</option>
                        <option value="North West">North West</option>
                        <option value="Western Cape">Western Cape</option>
                    </select>
                    <span asp-validation-for="Province" class="error-message"></span>
                    <span class="form-help">Select the South African province</span>
                </div>

                <div class="form-group">
                    <label asp-for="PostalCode" class="form-label">Postal Code</label>
                    <input asp-for="PostalCode" class="form-input" placeholder="e.g. 7600" />
                    <span asp-validation-for="PostalCode" class="error-message"></span>
                    <span class="form-help">Optional - main postal code for the town</span>
                </div>

                <div class="form-group">
                    <label asp-for="Population" class="form-label">Population</label>
                    <input asp-for="Population" type="number" class="form-input" placeholder="e.g. 25000" />
                    <span asp-validation-for="Population" class="error-message"></span>
                    <span class="form-help">Optional - estimated population of the town</span>
                </div>

                <div class="form-group form-group-full">
                    <label asp-for="Description" class="form-label">Description</label>
                    <textarea asp-for="Description" class="form-textarea" rows="3" placeholder="Brief description of the town, its attractions, or notable features..."></textarea>
                    <span asp-validation-for="Description" class="error-message"></span>
                    <span class="form-help">Optional - brief description to help users understand the town</span>
                </div>

                <div class="form-group form-group-full">
                    <label asp-for="Landmarks" class="form-label">Notable Landmarks</label>
                    <textarea asp-for="Landmarks" class="form-textarea" rows="4" placeholder="List notable landmarks, attractions, or points of interest (e.g., Town Hall, Main Church, Historical Museum, Nature Reserve, etc.)"></textarea>
                    <span asp-validation-for="Landmarks" class="error-message"></span>
                    <span class="form-help">Optional - comma-separated list of landmarks and attractions that visitors should know about</span>
                </div>
            </div>
        </div>

        <!-- Location Information -->
        <div class="form-section">
            <div class="form-section-header">
                <h4 class="form-section-title">
                    <span class="step-number">2</span>
                    Location Coordinates
                </h4>
                <p class="form-section-description">GPS coordinates for mapping (optional)</p>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label asp-for="Latitude" class="form-label">Latitude</label>
                    <input asp-for="Latitude" type="number" step="any" class="form-input" placeholder="e.g. -33.9249" />
                    <span asp-validation-for="Latitude" class="error-message"></span>
                    <span class="form-help">Decimal degrees (-90 to 90)</span>
                </div>

                <div class="form-group">
                    <label asp-for="Longitude" class="form-label">Longitude</label>
                    <input asp-for="Longitude" type="number" step="any" class="form-input" placeholder="e.g. 18.4241" />
                    <span asp-validation-for="Longitude" class="error-message"></span>
                    <span class="form-help">Decimal degrees (-180 to 180)</span>
                </div>
            </div>
            
            <div class="form-help">
                <strong>Tip:</strong> You can find coordinates using Google Maps - right-click on the town center and select the coordinates that appear.
            </div>
        </div>

        <!-- Form Actions -->
        <div class="form-actions">
            <a href="@Url.Action("Index", "AdminTowns")" class="auth-btn auth-btn-secondary">
                Cancel
            </a>
            <button type="submit" class="auth-btn auth-btn-cta">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 23 23">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                Update Town
            </button>
        </div>
    </form>
</div>